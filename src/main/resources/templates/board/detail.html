<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:replace="layout/head :: head"></div>
<body>
<div th:replace="layout/nav :: nav"></div>
<div class="container mt-5">
    <h1 class="detail-header" th:text="${boardList.title}">Study Title</h1><br>
    <div class="text-end mb-3" th:if="${boardList.writer != null and session.userNo == boardList.writer.userNo}">
        <!-- ì‚­ì œ ë²„íŠ¼ -->
        <button th:href="@{/board/delete/{id}(id=${boardList.boardNo})}" type="submit" class="btn btn-outline-dark"
                onclick="event.preventDefault(); document.getElementById('delete-form').submit();">
            ì‚­ì œ
        </button>
        <!-- ì‚­ì œë¥¼ ìœ„í•œ ìˆ¨ê²¨ì§„ í¼ -->
        <form id="delete-form" th:action="@{/board/delete/{id}(id=${boardList.boardNo})}" method="post" style="display: none;">
            <input type="hidden" name="id" th:value="${boardList.boardNo}">
        </form>

        <!-- ìˆ˜ì • ë²„íŠ¼ -->
        <form th:action="@{/board/modify/{id}(id=${boardList.boardNo})}" method="get">
            <button type="submit" class="btn btn-outline-dark">
                ìˆ˜ì •
            </button>
        </form>
    </div>

    <hr>
    <br><br>
    <div class="detail-info">
        <input type="hidden" id="loginStatus" th:value="${session.userName != null ? 'logged-in' : 'not-logged-in'}" />
        <div><dt>ìŠ¤í„°ë”” ê³¼ëª©</dt>&nbsp;&nbsp;<dd th:text="${boardList.studySubject}">Subject</dd></div>
        <div><dt>ì‘ì„±ì</dt>&nbsp;&nbsp;<dd th:text="${boardList.writer.userName}">Subject</dd></div>
        <div><dt>ì§„í–‰ ë°©ì‹</dt>&nbsp;&nbsp;<dd th:text="${boardList.studyType}">Type</dd></div>
        <div><dt>ëª¨ì§‘ ì¸ì›</dt>&nbsp;&nbsp;<dd th:text="${boardList.totalPeople}">0</dd></div>
        <div><dt>ë§ˆê° ì¼ì</dt>&nbsp;&nbsp;<dd th:text="${boardList.dueDate}">2023-01-01</dd></div>
        <div><dt>ì—°ë½ ë°©ë²•</dt>&nbsp;&nbsp;<dd><a th:href="${boardList.contactLink}" th:text="${boardList.contactLink}" class="detail-link">Open Chat</a></dd></div>
    </div>
    <br><br><br><br>
    <div>
        <div>
            <h3 style="text-align: left; font-weight: bold;">ìŠ¤í„°ë”” ì†Œê°œ</h3>
            <hr>
            <div id="contentBox" th:text="${boardList.content}">Content here</div>
            <hr>
        </div><br><br>
        <!-- ëŒ“ê¸€ ì„¹ì…˜ ì‹œì‘ -->
        <div class="comments-section">
            <h3 style="text-align: left; font-weight: bold;">ëŒ“ê¸€</h3>
            <!-- ëŒ“ê¸€ ì…ë ¥ -->
            <form id="commentForm" th:action="@{/board/detail/reply/{boardNo}(boardNo = ${boardList.boardNo})}" th:object="${replyRequest}" th:method="post">
                <div class="mb-3">
                    <div style="font-size: 3rem; margin-left: 0px;">ğŸ™‹ğŸ»</div>
                    <textarea class="form-control" id="commentText" th:field="*{comment}" rows="3" placeholder="ì—¬ê¸°ì— ì‘ì„±í•´ì£¼ì„¸ìš” ..."></textarea>
                </div>
                <div class="text-end">
                    <button type="button" class="btn btn-outline-dark"  style="margin-right: 30px; border-radius: 30px" onclick="isSessionExistFormAction(submitCommentForm)">ëŒ“ê¸€ ë“±ë¡</button>
                </div><br><br>
            </form>

            <!-- ì œì¶œëœ ëŒ“ê¸€ì„ ë³´ì—¬ì£¼ëŠ” ì˜ì—­ -->
            <div class="submitted-comments mt-4">
                <div th:each="reply : ${replyList}">
                    <div class="comment">
                        <p th:text="'ğŸ™‹ğŸ» '+${reply.writer}" class="comment-author" style="font-weight: bold; font-size:22px;">ì‘ì„±ì</p>
                        <div class="comment-content-container">
                            <div th:text="${reply.comment}" style="flex-grow: 1;">ëŒ“ê¸€ ë‚´ìš©</div>
                            <div class="text-end" th:if="${session.userName}">
                                <button type="submit" class="btn btn-outline-dark" style="margin-right: 20px; border-radius: 30px;">ì‚­ì œ</button>
                            </div>
                        </div>
                        <hr><br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div><br><br><br><br>
<footer class="py-5 bg-dark">
    <div class="container" style="margin-bottom: 0;"><p class="m-0 text-center text-white">Copyright &copy; Learning_Mate 2024</p></div>
</footer>
</body>
</html>